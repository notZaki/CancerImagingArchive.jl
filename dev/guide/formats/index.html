<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Formats · CancerImagingArchive.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.svg" alt="CancerImagingArchive.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit">CancerImagingArchive.jl</span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Introduction</a></li><li><span class="tocitem">Guide</span><ul><li class="is-active"><a class="tocitem" href>Formats</a><ul class="internal"><li><a class="tocitem" href="#DataFrames/CSV-1"><span>DataFrames/CSV</span></a></li><li><a class="tocitem" href="#DictionaryArray/JSON-1"><span>DictionaryArray/JSON</span></a></li><li><a class="tocitem" href="#Note-on-types-1"><span>Note on types</span></a></li></ul></li><li><a class="tocitem" href="../queries/">Queries</a></li><li><a class="tocitem" href="../downloading/">Data Download</a></li></ul></li><li><a class="tocitem" href="../../functions/">Functions</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Guide</a></li><li class="is-active"><a href>Formats</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Formats</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/notZaki/CancerImagingArchive.jl/blob/master/docs/src/guide/formats.md#L" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Formats-1"><a class="docs-heading-anchor" href="#Formats-1">Formats</a><a class="docs-heading-anchor-permalink" href="#Formats-1" title="Permalink"></a></h1><p>Most functions in this module return either a DataFrame (default) or a Dictionary Array. Both formats have their respective advantages and disadvantages.</p><h2 id="DataFrames/CSV-1"><a class="docs-heading-anchor" href="#DataFrames/CSV-1">DataFrames/CSV</a><a class="docs-heading-anchor-permalink" href="#DataFrames/CSV-1" title="Permalink"></a></h2><p>DataFrames display the results in a table and this is the default behaviour. The table is useful for visually analysing the results. For example, the studies in the <a href="https://wiki.cancerimagingarchive.net/display/Public/TCGA-SARC">TCGA-SARC collection</a> can be obtained by:</p><pre><code class="language-julia">studies_df = tcia_studies(collection = &quot;TCGA-SARC&quot;)</code></pre><table class="data-frame"><thead><tr><th></th><th>Collection</th><th>PatientID</th><th>PatientName</th><th>PatientSex</th><th>StudyInstanceUID</th><th>StudyDate</th><th>StudyDescription</th><th>PatientAge</th><th>SeriesCount</th></tr><tr><th></th><th>String</th><th>String</th><th>String</th><th>String</th><th>String</th><th>Dates…</th><th>String</th><th>String</th><th>Int64</th></tr></thead><tbody><p>6 rows × 9 columns</p><tr><th>1</th><td>TCGA-SARC</td><td>TCGA-QQ-A5V2</td><td>TCGA-QQ-A5V2</td><td>M</td><td>1.3.6.1.4.1.14519.5.2.1.3023.4024.194945893650500105451818109994</td><td>1998-08-03</td><td>CT ANGIOGRAPHY PELVIS W\\/WO CON</td><td>042Y</td><td>3</td></tr><tr><th>2</th><td>TCGA-SARC</td><td>TCGA-QQ-A5VC</td><td>TCGA-QQ-A5VC</td><td>F</td><td>1.3.6.1.4.1.14519.5.2.1.3023.4024.201397008342044883871995521133</td><td>2003-06-01</td><td>CT CHEST ABD PELVIS W\\/ CONTR</td><td>064Y</td><td>2</td></tr><tr><th>3</th><td>TCGA-SARC</td><td>TCGA-QQ-A8VF</td><td>TCGA-QQ-A8VF</td><td>M</td><td>1.3.6.1.4.1.14519.5.2.1.3023.4024.150353595775386960889448399748</td><td>1997-11-26</td><td>MRI LOWER EXTREMITY W\\/WO CONT</td><td>070Y</td><td>9</td></tr><tr><th>4</th><td>TCGA-SARC</td><td>TCGA-QQ-A8VF</td><td>TCGA-QQ-A8VF</td><td>M</td><td>1.3.6.1.4.1.14519.5.2.1.3023.4024.298690116465423805879206377806</td><td>1997-11-29</td><td>CT CHEST W\\/ CONTRAST</td><td>070Y</td><td>6</td></tr><tr><th>5</th><td>TCGA-SARC</td><td>TCGA-QQ-A8VH</td><td>TCGA-QQ-A8VH</td><td>F</td><td>1.3.6.1.4.1.14519.5.2.1.3023.4024.215308722288168917637555384485</td><td>2002-03-15</td><td>MRI THORACIC W\\/WO CONTRAST</td><td>031Y</td><td>11</td></tr><tr><th>6</th><td>TCGA-SARC</td><td>TCGA-QQ-A8VG</td><td>TCGA-QQ-A8VG</td><td>M</td><td>1.3.6.1.4.1.14519.5.2.1.3023.4024.122712175454295553928844869548</td><td>2001-08-05</td><td>CT CHEST ABD PELVIS W\\/ CONTR</td><td>052Y</td><td>2</td></tr></tbody></table><h3 id="Manipulating-the-DataFrame-object-1"><a class="docs-heading-anchor" href="#Manipulating-the-DataFrame-object-1">Manipulating the DataFrame object</a><a class="docs-heading-anchor-permalink" href="#Manipulating-the-DataFrame-object-1" title="Permalink"></a></h3><p>The table can be manipulated using tools from the <a href="https://juliadata.github.io/DataFrames.jl/stable/">DataFrames.jl</a> and <a href="https://juliadata.github.io/CSV.jl/stable/">CSV.jl</a> packages.</p><p>Individual columns in a DataFrame object–-suppose it is named <code>data_frame</code>–-can be accessed by <code>data_frame.column_name</code> where the available column names are in <code>names(data_frame)</code>.</p><pre><code class="language-julia-repl">julia&gt; names(studies_df)
9-element Array{Symbol,1}:
 :Collection
 :PatientID
 :PatientName
 :PatientSex
 :StudyInstanceUID
 :StudyDate
 :StudyDescription
 :PatientAge
 :SeriesCount

julia&gt; studies_df.StudyDate
6-element Array{Dates.Date,1}:
 1998-08-03
 2003-06-01
 1997-11-26
 1997-11-29
 2002-03-15
 2001-08-05</code></pre><p>The table can also be filtered and sorted. As an example, the following lines will sort the previous table by the number of series and then remove the <code>StudyInstanceUID</code> and <code>PatientName</code> columns:</p><pre><code class="language-julia">using DataFrames
studies_sorted_by_count = sort(studies_df, :SeriesCount)
select!(studies_sorted_by_count, Not([:StudyInstanceUID, :PatientName]))</code></pre><table class="data-frame"><thead><tr><th></th><th>Collection</th><th>PatientID</th><th>PatientSex</th><th>StudyDate</th><th>StudyDescription</th><th>PatientAge</th><th>SeriesCount</th></tr><tr><th></th><th>String</th><th>String</th><th>String</th><th>Dates…</th><th>String</th><th>String</th><th>Int64</th></tr></thead><tbody><p>6 rows × 7 columns</p><tr><th>1</th><td>TCGA-SARC</td><td>TCGA-QQ-A5VC</td><td>F</td><td>2003-06-01</td><td>CT CHEST ABD PELVIS W\\/ CONTR</td><td>064Y</td><td>2</td></tr><tr><th>2</th><td>TCGA-SARC</td><td>TCGA-QQ-A8VG</td><td>M</td><td>2001-08-05</td><td>CT CHEST ABD PELVIS W\\/ CONTR</td><td>052Y</td><td>2</td></tr><tr><th>3</th><td>TCGA-SARC</td><td>TCGA-QQ-A5V2</td><td>M</td><td>1998-08-03</td><td>CT ANGIOGRAPHY PELVIS W\\/WO CON</td><td>042Y</td><td>3</td></tr><tr><th>4</th><td>TCGA-SARC</td><td>TCGA-QQ-A8VF</td><td>M</td><td>1997-11-29</td><td>CT CHEST W\\/ CONTRAST</td><td>070Y</td><td>6</td></tr><tr><th>5</th><td>TCGA-SARC</td><td>TCGA-QQ-A8VF</td><td>M</td><td>1997-11-26</td><td>MRI LOWER EXTREMITY W\\/WO CONT</td><td>070Y</td><td>9</td></tr><tr><th>6</th><td>TCGA-SARC</td><td>TCGA-QQ-A8VH</td><td>F</td><td>2002-03-15</td><td>MRI THORACIC W\\/WO CONTRAST</td><td>031Y</td><td>11</td></tr></tbody></table><h3 id="Saving-DataFrame-as-CSV-1"><a class="docs-heading-anchor" href="#Saving-DataFrame-as-CSV-1">Saving DataFrame as CSV</a><a class="docs-heading-anchor-permalink" href="#Saving-DataFrame-as-CSV-1" title="Permalink"></a></h3><p>The contents of the table can be written to a csv file by:</p><pre><code class="language-julia-repl">julia&gt; dataframe_to_csv(dataframe = studies_df, file = &quot;output_file.csv&quot;)</code></pre><h2 id="DictionaryArray/JSON-1"><a class="docs-heading-anchor" href="#DictionaryArray/JSON-1">DictionaryArray/JSON</a><a class="docs-heading-anchor-permalink" href="#DictionaryArray/JSON-1" title="Permalink"></a></h2><p>Instead of a table, an array of dictionaries can be obtained by passing <code>format = &quot;json&quot;</code> as an argument when calling the query function. For example, the DataFrame from the previous example could have been obtained as an array by:</p><pre><code class="language-julia">studies_array = tcia_studies(collection = &quot;TCGA-SARC&quot;, format = &quot;json&quot;)</code></pre><pre><code class="language-none">6-element Array{Any,1}:
 Dict{String,Any}(&quot;PatientName&quot;=&gt;&quot;TCGA-QQ-A5V2&quot;,&quot;PatientSex&quot;=&gt;&quot;M&quot;,&quot;StudyDescription&quot;=&gt;&quot;CT ANGIOGRAPHY PELVIS W/WO CON&quot;,&quot;PatientID&quot;=&gt;&quot;TCGA-QQ-A5V2&quot;,&quot;SeriesCount&quot;=&gt;3,&quot;PatientAge&quot;=&gt;&quot;042Y&quot;,&quot;StudyInstanceUID&quot;=&gt;&quot;1.3.6.1.4.1.14519.5.2.1.3023.4024.194945893650500105451818109994&quot;,&quot;Collection&quot;=&gt;&quot;TCGA-SARC&quot;,&quot;StudyDate&quot;=&gt;&quot;1998-08-03&quot;)
 Dict{String,Any}(&quot;PatientName&quot;=&gt;&quot;TCGA-QQ-A5VC&quot;,&quot;PatientSex&quot;=&gt;&quot;F&quot;,&quot;StudyDescription&quot;=&gt;&quot;CT CHEST ABD PELVIS W/ CONTR&quot;,&quot;PatientID&quot;=&gt;&quot;TCGA-QQ-A5VC&quot;,&quot;SeriesCount&quot;=&gt;2,&quot;PatientAge&quot;=&gt;&quot;064Y&quot;,&quot;StudyInstanceUID&quot;=&gt;&quot;1.3.6.1.4.1.14519.5.2.1.3023.4024.201397008342044883871995521133&quot;,&quot;Collection&quot;=&gt;&quot;TCGA-SARC&quot;,&quot;StudyDate&quot;=&gt;&quot;2003-06-01&quot;)  
 Dict{String,Any}(&quot;PatientName&quot;=&gt;&quot;TCGA-QQ-A8VF&quot;,&quot;PatientSex&quot;=&gt;&quot;M&quot;,&quot;StudyDescription&quot;=&gt;&quot;MRI LOWER EXTREMITY W/WO CONT&quot;,&quot;PatientID&quot;=&gt;&quot;TCGA-QQ-A8VF&quot;,&quot;SeriesCount&quot;=&gt;9,&quot;PatientAge&quot;=&gt;&quot;070Y&quot;,&quot;StudyInstanceUID&quot;=&gt;&quot;1.3.6.1.4.1.14519.5.2.1.3023.4024.150353595775386960889448399748&quot;,&quot;Collection&quot;=&gt;&quot;TCGA-SARC&quot;,&quot;StudyDate&quot;=&gt;&quot;1997-11-26&quot;) 
 Dict{String,Any}(&quot;PatientName&quot;=&gt;&quot;TCGA-QQ-A8VF&quot;,&quot;PatientSex&quot;=&gt;&quot;M&quot;,&quot;StudyDescription&quot;=&gt;&quot;CT CHEST W/ CONTRAST&quot;,&quot;PatientID&quot;=&gt;&quot;TCGA-QQ-A8VF&quot;,&quot;SeriesCount&quot;=&gt;6,&quot;PatientAge&quot;=&gt;&quot;070Y&quot;,&quot;StudyInstanceUID&quot;=&gt;&quot;1.3.6.1.4.1.14519.5.2.1.3023.4024.298690116465423805879206377806&quot;,&quot;Collection&quot;=&gt;&quot;TCGA-SARC&quot;,&quot;StudyDate&quot;=&gt;&quot;1997-11-29&quot;)          
 Dict{String,Any}(&quot;PatientName&quot;=&gt;&quot;TCGA-QQ-A8VH&quot;,&quot;PatientSex&quot;=&gt;&quot;F&quot;,&quot;StudyDescription&quot;=&gt;&quot;MRI THORACIC W/WO CONTRAST&quot;,&quot;PatientID&quot;=&gt;&quot;TCGA-QQ-A8VH&quot;,&quot;SeriesCount&quot;=&gt;11,&quot;PatientAge&quot;=&gt;&quot;031Y&quot;,&quot;StudyInstanceUID&quot;=&gt;&quot;1.3.6.1.4.1.14519.5.2.1.3023.4024.215308722288168917637555384485&quot;,&quot;Collection&quot;=&gt;&quot;TCGA-SARC&quot;,&quot;StudyDate&quot;=&gt;&quot;2002-03-15&quot;)   
 Dict{String,Any}(&quot;PatientName&quot;=&gt;&quot;TCGA-QQ-A8VG&quot;,&quot;PatientSex&quot;=&gt;&quot;M&quot;,&quot;StudyDescription&quot;=&gt;&quot;CT CHEST ABD PELVIS W/ CONTR&quot;,&quot;PatientID&quot;=&gt;&quot;TCGA-QQ-A8VG&quot;,&quot;SeriesCount&quot;=&gt;2,&quot;PatientAge&quot;=&gt;&quot;052Y&quot;,&quot;StudyInstanceUID&quot;=&gt;&quot;1.3.6.1.4.1.14519.5.2.1.3023.4024.122712175454295553928844869548&quot;,&quot;Collection&quot;=&gt;&quot;TCGA-SARC&quot;,&quot;StudyDate&quot;=&gt;&quot;2001-08-05&quot;)  </code></pre><h3 id="Manipulating-the-Dictionary-Array-1"><a class="docs-heading-anchor" href="#Manipulating-the-Dictionary-Array-1">Manipulating the Dictionary Array</a><a class="docs-heading-anchor-permalink" href="#Manipulating-the-Dictionary-Array-1" title="Permalink"></a></h3><p>The array can be manipulated by iterating over the elements. As an example, the following lines will collect patients that are less than 60 years old:</p><pre><code class="language-julia">patients_below_60Y = []
for patient in studies_array
  if patient[&quot;PatientAge&quot;] &lt; &quot;060Y&quot;
    push!(patients_below_60Y, patient)
  end
end
# Print the new array:
patients_below_60Y</code></pre><pre><code class="language-none">3-element Array{Any,1}:
 Dict{String,Any}(&quot;PatientName&quot;=&gt;&quot;TCGA-QQ-A5V2&quot;,&quot;PatientSex&quot;=&gt;&quot;M&quot;,&quot;StudyDescription&quot;=&gt;&quot;CT ANGIOGRAPHY PELVIS W/WO CON&quot;,&quot;PatientID&quot;=&gt;&quot;TCGA-QQ-A5V2&quot;,&quot;SeriesCount&quot;=&gt;3,&quot;PatientAge&quot;=&gt;&quot;042Y&quot;,&quot;StudyInstanceUID&quot;=&gt;&quot;1.3.6.1.4.1.14519.5.2.1.3023.4024.194945893650500105451818109994&quot;,&quot;Collection&quot;=&gt;&quot;TCGA-SARC&quot;,&quot;StudyDate&quot;=&gt;&quot;1998-08-03&quot;)
 Dict{String,Any}(&quot;PatientName&quot;=&gt;&quot;TCGA-QQ-A8VH&quot;,&quot;PatientSex&quot;=&gt;&quot;F&quot;,&quot;StudyDescription&quot;=&gt;&quot;MRI THORACIC W/WO CONTRAST&quot;,&quot;PatientID&quot;=&gt;&quot;TCGA-QQ-A8VH&quot;,&quot;SeriesCount&quot;=&gt;11,&quot;PatientAge&quot;=&gt;&quot;031Y&quot;,&quot;StudyInstanceUID&quot;=&gt;&quot;1.3.6.1.4.1.14519.5.2.1.3023.4024.215308722288168917637555384485&quot;,&quot;Collection&quot;=&gt;&quot;TCGA-SARC&quot;,&quot;StudyDate&quot;=&gt;&quot;2002-03-15&quot;)   
 Dict{String,Any}(&quot;PatientName&quot;=&gt;&quot;TCGA-QQ-A8VG&quot;,&quot;PatientSex&quot;=&gt;&quot;M&quot;,&quot;StudyDescription&quot;=&gt;&quot;CT CHEST ABD PELVIS W/ CONTR&quot;,&quot;PatientID&quot;=&gt;&quot;TCGA-QQ-A8VG&quot;,&quot;SeriesCount&quot;=&gt;2,&quot;PatientAge&quot;=&gt;&quot;052Y&quot;,&quot;StudyInstanceUID&quot;=&gt;&quot;1.3.6.1.4.1.14519.5.2.1.3023.4024.122712175454295553928844869548&quot;,&quot;Collection&quot;=&gt;&quot;TCGA-SARC&quot;,&quot;StudyDate&quot;=&gt;&quot;2001-08-05&quot;)  </code></pre><p>The available keys for each dictionary in the array are listed by:</p><pre><code class="language-julia-repl">julia&gt; keys(studies_array[1])
Base.KeySet for a Dict{String,Any} with 9 entries. Keys:
  &quot;PatientName&quot;
  &quot;PatientSex&quot;
  &quot;StudyDescription&quot;
  &quot;PatientID&quot;
  &quot;SeriesCount&quot;
  &quot;PatientAge&quot;
  &quot;StudyInstanceUID&quot;
  &quot;Collection&quot;
  &quot;StudyDate&quot;</code></pre><h3 id="Saving-Dictionary-Array-as-JSON-1"><a class="docs-heading-anchor" href="#Saving-Dictionary-Array-as-JSON-1">Saving Dictionary Array as JSON</a><a class="docs-heading-anchor-permalink" href="#Saving-Dictionary-Array-as-JSON-1" title="Permalink"></a></h3><p>The array can be written to a JSON file by</p><pre><code class="language-julia-repl">julia&gt; dictionary_to_json(dictionary = studies_array, file = &quot;output_file.json&quot;)</code></pre><h2 id="Note-on-types-1"><a class="docs-heading-anchor" href="#Note-on-types-1">Note on types</a><a class="docs-heading-anchor-permalink" href="#Note-on-types-1" title="Permalink"></a></h2><p>The DataFrames object tries to figure out the types from the input while the DictionaryArray just accepts whatever the API returns. For a practical example of this, suppose we want to know the size of an imaging series; the DataFrame version will be</p><pre><code class="language-julia">tcia_series_size(series = &quot;1.3.6.1.4.1.14519.5.2.1.4591.4001.241972527061347495484079664948&quot;)</code></pre><table class="data-frame"><thead><tr><th></th><th>TotalSizeInBytes</th><th>ObjectCount</th></tr><tr><th></th><th>Float64</th><th>Int64</th></tr></thead><tbody><p>1 rows × 2 columns</p><tr><th>1</th><td>1.49149e8</td><td>1120</td></tr></tbody></table><p>while the JSON version will be</p><pre><code class="language-julia-repl">julia&gt; tcia_series_size(series = &quot;1.3.6.1.4.1.14519.5.2.1.4591.4001.241972527061347495484079664948&quot;, format=&quot;json&quot;)[1]
Dict{String,Any} with 2 entries:
  &quot;ObjectCount&quot;      =&gt; 1120
  &quot;TotalSizeInBytes&quot; =&gt; &quot;149149266.000000&quot;</code></pre><p>The difference between the two is that the DataFrames version recognizes that <code>TotalSizeInBytes</code> is a number whereas the DictionaryArray displays it as a string (because the API returns it as a string).</p><p>DataFrames&#39; ability to recognize types is usually helpful, but sometimes it can fail. For example, in an anonymized dataset where patient names are replaced by numbers, the DataFrames object will incorrectly treat the names as numbers.</p><p>These differences are unlikely to cause problems in practice so it isn&#39;t something to be actively concerned about.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../">« Introduction</a><a class="docs-footer-nextpage" href="../queries/">Queries »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Monday 10 February 2020 16:58">Monday 10 February 2020</span>. Using Julia version 1.0.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
